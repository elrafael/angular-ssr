<div class="min-h-screen bg-slate-50 p-8">
  <div class="flex flex-col mb-8">
    <h1 class="text-4xl font-extrabold text-slate-900 tracking-tight">Todos</h1>
    <p class="text-slate-500 mt-2 italic font-medium">Client Render (CSR)</p>
  </div>

  <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-4">
    @defer (on timer(800ms)) {
      @for (todo of todos$ | async; track todo.id) {
        <div
          [style.animation-delay]="$index * 50 + 'ms'"
          class="group bg-white p-6 rounded-2xl shadow-sm border border-slate-200 transition-all duration-300 flex flex-col justify-between animate-in fade-in slide-in-from-bottom-4 duration-700 fill-mode-both"
          [class.border-l-4]="true"
          [class.border-l-emerald-500]="todo.completed"
          [class.border-l-amber-400]="!todo.completed"
        >
          <div>
            <div class="flex items-center justify-between mb-4">
              <span
                class="px-3 py-1 rounded-full text-xs font-bold tracking-wider uppercase"
                [class]="
                  todo.completed ? 'bg-emerald-50 text-emerald-700' : 'bg-amber-50 text-amber-700'
                "
              >
                {{ todo.completed ? 'Completed' : 'Pending' }}
              </span>
              <span class="text-slate-300 font-mono text-sm">#{{ todo.id }}</span>
            </div>

            <h2 class="text-lg font-semibold text-slate-800 leading-snug first-letter:uppercase">
              {{ todo.title }}
            </h2>
          </div>

          <div
            class="mt-6 pt-4 border-t border-slate-50 flex items-center justify-between text-slate-500 text-xs font-medium"
          >
            <span class="flex items-center">
              <svg class="w-3 h-3 mr-1 text-slate-400" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"></path>
              </svg>
              {{ todo.userName }}
            </span>
          </div>
        </div>
      } @empty {
        <div
          class="col-span-full text-center py-12 bg-white rounded-2xl border border-dashed border-slate-300"
        >
          <p class="text-slate-500 italic">No todos found</p>
        </div>
      }
    } @placeholder {
      @for (i of [1, 2, 3, 4, 5, 6, 7, 8]; track i) {
        <div class="bg-white p-6 rounded-2xl border border-slate-100 shadow-sm animate-pulse">
          <div class="flex justify-between mb-4">
            <div class="h-5 bg-slate-200 rounded-full w-20"></div>
            <div class="h-5 bg-slate-100 rounded w-8"></div>
          </div>
          <div class="space-y-3">
            <div class="h-4 bg-slate-200 rounded w-full"></div>
            <div class="h-4 bg-slate-200 rounded w-5/6"></div>
          </div>
          <div class="h-4 bg-slate-100 rounded w-1/3 mt-8"></div>
        </div>
      }
    } @error {
      <div
        class="col-span-full p-6 bg-red-50 border border-red-200 text-red-700 rounded-2xl flex items-center justify-center"
      >
        <span class="mr-2">⚠️</span>
        <p class="font-bold">Error loading todos. Check API connection.</p>
      </div>
    }
  </div>
</div>
